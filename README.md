# Rust static server
### О сервере
Разработал Балицкий Михаил Михайлович, студент 3 семестра Технопарка, в качестве домашнего задания по курсу Highload.

Реализация использует сочетание `coroutines` и `thread pool`.
В основе имплементации лежит библиотека async-std, реализующая корутины в языке Rust, а также самописный thread pool.

Сервер способен отдавать тяжелые файлы без ошибок (проверено на образе диска windows).
### Тестирование
Запустить nginx
```shell script
docker build -t rustserver:nginx ./nginx && docker run -p 80:80 rustserver:nginx
```
Запустить rust
```shell script
docker build -t rustserver . && docker run -p 80:80 rustserver
```
Тестирование функциональности
```shell script
./httptest.py
```
### Сравнение производительности nginx и сервера
Поочередно запускались контейнеры для nginx и rust серверов, для каждого из них 20 раз проводилось тестирование при помощи `httptest.py`. 
Полученный данные приведены ниже. Nginx оказался примерно на 20% быстрее.

_Тестирование проводилось на Macbook pro 13' 2018 года. Процессор: Intel core i5, 2.3 GHz, 4 cores_

| Nginx | 0.157s  |
| ----- | ----- |
| Rust | 0.200s |

| Nginx | Rust  |
| ----- | ----- |
| 0.171 | 0.215 |
| 0.137 | 0.229 |
| 0.151 | 0.226 |
| 0.172 | 0.226 |
| 0.152 | 0.186 |
| 0.153 | 0.207 |
| 0.158 | 0.171 |
| 0.145 | 0.235 |
| 0.166 | 0.179 |
| 0.154 | 0.229 |
| 0.161 | 0.174 |
| 0.158 | 0.145 |
| 0.155 | 0.155 |
| 0.159 | 0.167 |
| 0.162 | 0.187 |
| 0.155 | 0.212 |
| 0.163 | 0.244 |
| 0.150 | 0.222 |
| 0.161 | 0.207 |
| 0.163 | 0.185 |
